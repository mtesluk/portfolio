(this.webpackJsonpporfolio=this.webpackJsonpporfolio||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),i=a.n(o),s=a(8);a(95),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,l=a(5),u=a(6),m=a(13),d=a(12),h=a(9),f=a(28),p=a(69),g=a.n(p),v=(a(105),a(106),"/account"),b="",E={tokenKey:"token_fsf0324fsd",endpoints:{auth:{login:v+"/api_token_auth/",me:v+"/users/me/",exists_fb:v+"/users/exist_fb_account/",register:v+"/users/",users:v+"/users/"},blog:{authors:b+"/blogs/authors/",countries:b+"/blogs/countries/",base:b+"/blogs/"},countries:{base:"/countries"}},routes:{root:"/",blog:{dashboard:"/blog",authors:"/blog/authors",sites:"/blog/sites",addNew:"/blog/add",profile:"/blog/profile",detail:(c="/blog/",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?"".concat(c).concat(e):"".concat(c,":id")})}}},_=(a(107),a(71)),y=a.n(_);function S(e){return{type:"OPEN_LOGIN",value:e}}function N(e){return{type:"SET_TOKEN",value:e}}var O=function(e){return{type:"success",msg:e}},k=function(e){return{type:"error",msg:e}};function j(e){return{type:"SET_USER_DATA",data:e}}var w,C=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._ref=r.a.createRef(),e.state={showSidebar:!0,showNavbar:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.isAppropriateWidth()&&(this.setState({showNavbar:!0}),this.setState({showSidebar:!1}))}},{key:"isAppropriateWidth",value:function(){return window.innerWidth<1e3}},{key:"toggleSidebar",value:function(){this.setState({showSidebar:!this.state.showSidebar})}},{key:"handleToggleSidebarIfSmallScreen",value:function(){this.isAppropriateWidth()&&this.toggleSidebar()}},{key:"handleLogin",value:function(){this.handleToggleSidebarIfSmallScreen(),this.props.token?(this.props.resetToken(),this.props.setUserData({}),this.props.notifySuccess("Logout confirmed")):this.props.setOpenLoginDialog(!0)}},{key:"renderLoginButton",value:function(){return this.props.token?"Logout":"Login"}},{key:"renderSidebar",value:function(){var e,t=this;return r.a.createElement("div",{className:"blog__sidebar ".concat(this.state.showSidebar?"blog__sidebar--show":"blog__sidebar--hide"),ref:this._ref},r.a.createElement("div",{className:"blog__top"},r.a.createElement(h.b,{to:"/",className:"blog__name"},"Blog"),r.a.createElement("div",{className:"blog__navs"},r.a.createElement(h.b,{to:E.routes.blog.dashboard,onClick:function(){return t.handleToggleSidebarIfSmallScreen()},className:""},"Dashboard"),r.a.createElement(h.b,{to:E.routes.blog.authors,onClick:function(){return t.handleToggleSidebarIfSmallScreen()},className:""},"Authors"),r.a.createElement(h.b,{to:E.routes.blog.sites,onClick:function(){return t.handleToggleSidebarIfSmallScreen()},className:""},"Sites"),r.a.createElement(h.b,{to:E.routes.blog.addNew,onClick:function(){return t.handleToggleSidebarIfSmallScreen()},className:""},"Add blog"))),r.a.createElement("div",{className:"blog__bottom"},this.props.token&&r.a.createElement(h.b,{to:E.routes.blog.profile,onClick:function(){return t.handleToggleSidebarIfSmallScreen()},className:"blog__profile"},null===(e=this.props.user)||void 0===e?void 0:e.username),r.a.createElement("div",{className:"blog__login",onClick:function(){return t.handleLogin()}},this.renderLoginButton())))}},{key:"renderNavbar",value:function(){var e=this;return r.a.createElement("div",{className:"blog__navbar"},r.a.createElement(y.a,{className:"blog__navbar-icon",fontSize:"large",onClick:function(){return e.toggleSidebar()}}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"blog"},this.state.showSidebar&&this.renderSidebar(),r.a.createElement("div",{className:"blog__main"},this.state.showNavbar&&this.renderNavbar(),this.props.children))}}]),a}(r.a.Component),A=Object(s.b)((function(e){return{user:e.user,token:e.token}}),(function(e){return{setOpenLoginDialog:function(t){return e(S(t))},notifySuccess:function(t){return e(O(t))},resetToken:function(){return e({type:"SET_TOKEN",value:""})},setUserData:function(t){return e(j(t))}}}))(C),R=a(79),B=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{notifyError:function(t){return e(k(t))}}}))((function(e){var t=e.component,a=e.user,n=e.app,o=e.notifyError,i=Object(R.a)(e,["component","user","app","notifyError"]);return r.a.createElement(f.b,Object.assign({},i,{render:function(e){return(null===a||void 0===a?void 0:a.username)?r.a.createElement(t,e):(o("Please sign in to have full access!"),r.a.createElement(f.a,{to:{pathname:"/".concat(n)}}))}}))})),P=a(10),T=(a(110),a(111),function(e){return r.a.createElement("button",{className:"widget-button",type:e.type||"button",onClick:e.onClick},e.text)}),x=a(15),D=(a(112),a(72)),I=a.n(D),L=function(e){var t=Object(n.useState)(null),a=Object(x.a)(t,2),o=a[0],i=a[1],s=o?r.a.createElement("img",{className:"widget-select-file__img",src:URL.createObjectURL(o)}):r.a.createElement(r.a.Fragment,null),c=o?"widget-select-file--resize":"",l=r.a.createElement(I.a,{fontSize:"large",style:{verticalAlign:"text-top",marginRight:"1rem"}});return r.a.createElement("div",{className:"widget-select-file ".concat(c)},s,r.a.createElement("label",{htmlFor:"widget-select-file-id-".concat(e.orderNumber),className:"widget-select-file__label"},l,(null===o||void 0===o?void 0:o.name)||"Select file..."),r.a.createElement("input",{id:"widget-select-file-id-".concat(e.orderNumber),className:"widget-select-file__input",type:"file",name:e.name,accept:"image/*",onChange:function(t){return function(t){var a=t.target.files[0];i(a),e.onChange&&e.onChange(a)}(t)}}))};!function(e){e[e.PARAGRAPH=0]="PARAGRAPH",e[e.IMAGE=1]="IMAGE"}(w||(w={}));var U,M=a(3),q=a(73),F=a.n(q).a.create({baseURL:"/portfolio"}),G=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F.get(e,{params:t}).then((function(e){return e.data}))}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F.post(e,t,a).then((function(e){return e.data}))}},{key:"delete",value:function(e){return F.delete(e).then((function(e){return e.data}))}},{key:"put",value:function(e,t){return F.put(e,t).then((function(e){return e.data}))}}]),e}(),H=function(){function e(){Object(l.a)(this,e),this._httpService=new G,this.seperator="/{}/",this.separatorHelper="//{()}\\"}return Object(u.a)(e,[{key:"formatContent",value:function(e){var t=this;return e.map((function(e){return 0===e.type?e.value:t.seperator})).join("")}},{key:"unformatContent",value:function(e,t){var a=this,n=[];return(t&&t.split(",")||[]).forEach((function(t){var r=(e=e.replace(a.seperator,a.separatorHelper)).split(a.separatorHelper);e=r[1],r[0]&&n.push({value:r[0],type:w.PARAGRAPH}),n.push({value:t,type:w.IMAGE})})),e&&n.push({value:e,type:w.PARAGRAPH}),n}},{key:"removeBlog",value:function(e){var t="".concat(E.endpoints.blog.base).concat(e,"/");return this._httpService.delete(t).then((function(e){return e}))}},{key:"getBlog",value:function(e){var t="".concat(E.endpoints.blog.base).concat(e,"/");return this._httpService.get(t).then((function(e){return e}))}},{key:"putBlog",value:function(e,t){var a="".concat(E.endpoints.blog.base).concat(e,"/");return this._httpService.put(a,t).then((function(e){return e}))}},{key:"activateBlog",value:function(e){var t="".concat(E.endpoints.blog.base).concat(e,"/");return this._httpService.put(t,{is_active:!0}).then((function(e){return e}))}},{key:"getActivatedBlogs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E.endpoints.blog.base,a=Object(M.a)(Object(M.a)({},e),{},{is_active:!0});return this._httpService.get(t,a).then((function(e){return e}))}},{key:"getBlogs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E.endpoints.blog.base;return this._httpService.get(t,e).then((function(e){return e}))}},{key:"postBlog",value:function(e){var t=new FormData;e.elements.filter((function(e){return 1===e.type})).map((function(e){return e.value})).forEach((function(e){console.log(e),t.append("file",e)}));var a=this.formatContent(e.elements);t.set("content",a),t.set("country",e.countries.join(";")),t.set("title",e.title),console.log(t);var n=E.endpoints.blog.base;return this._httpService.post(n,t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}))}}]),e}(),z=(a(130),a(131),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._httpService=new G,e.state={selected:-1,data:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.endpoint;e&&this.getData(e)}},{key:"getData",value:function(e){var t=this;e&&this._httpService.get(e).then((function(e){t.setState({data:e||[]})})).catch((function(e){}))}},{key:"handleSelectChange",value:function(e){var t=Number(e.target.value)||e.target.value;this.props.onChange&&this.props.onChange(t),this.setState({selected:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("select",{className:"widget-select",value:this.props.changeValue?this.state.selected:-1,onChange:function(t){return e.handleSelectChange(t)}},r.a.createElement("option",{value:-1,disabled:!0},this.props.placeholder||"Pick"),this.state.data.map((function(e,t){return r.a.createElement("option",{key:e.id||t,value:e.id||e.name},e.name)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.data===t.data||e.endpoint?null:{data:e.data}}}]),a}(r.a.Component)),V=function(e){var t=Object(n.useState)([]),a=Object(x.a)(t,2),o=a[0],i=a[1];return r.a.createElement("div",{className:"widget-select-multiple"},r.a.createElement(z,{placeholder:e.placeholder,data:e.data,endpoint:e.endpoint,onChange:function(t){return function(t){var a=[t].concat(Object(P.a)(o));i(a),e.onChange&&e.onChange(a)}(t)}}),r.a.createElement("div",{className:"widget-select-multiple__selected-elements"},o.map((function(e,t){return r.a.createElement("span",{key:t,className:"widget-select-multiple__selected-element"},e,r.a.createElement("span",{onClick:function(){return e=t,void i(o.filter((function(t,a){return a!=e})));var e},className:"widget-select-multiple__selected-element-rm"},"x"))}))))},K=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._service=new H,e.state={elements:[{value:"",type:w.PARAGRAPH}],title:"",countries:[]},e}return Object(u.a)(a,[{key:"clearState",value:function(){this.setState({elements:[{value:"",type:w.PARAGRAPH}],title:"",countries:[]})}},{key:"addNewParagraph",value:function(e,t){this.addElement(w.PARAGRAPH,t)}},{key:"addNewImage",value:function(e,t){this.addElement(w.IMAGE,t)}},{key:"addElement",value:function(e,t){var a=Object(P.a)(this.state.elements);a.splice(t+1,0,{value:"",type:e}),this.setState({elements:Object(P.a)(a)})}},{key:"removeElement",value:function(e,t){var a=Object(P.a)(this.state.elements);a.splice(t,1),this.setState({elements:Object(P.a)(a)})}},{key:"onParagraphValueChange",value:function(e,t){var a=Object(P.a)(this.state.elements);a[t].value=e.target.value,this.setState({elements:a})}},{key:"onFileChange",value:function(e,t){var a=Object(P.a)(this.state.elements);a[t].value=e,this.setState({elements:a})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={elements:this.state.elements,countries:this.state.countries,title:this.state.title};this._service.postBlog(a).then((function(e){t.clearState(),t.props.notifySuccess("Blog successfully created. Please wait for administration verification!"),t.props.history.push("/blog/"+e.id)})).catch((function(e){}))}},{key:"renderSelectImage",value:function(e,t){var a=this;return r.a.createElement(L,{name:"blog-image",onChange:function(e){return a.onFileChange(e,t)},orderNumber:t})}},{key:"renderParagraph",value:function(e,t){var a=this;return r.a.createElement("div",{className:"blog-add__paragraph",key:t},r.a.createElement("textarea",{className:"blog-add__control blog-add__textarea",placeholder:"Type...",rows:5,value:e,onChange:function(e){return a.onParagraphValueChange(e,t)}}))}},{key:"renderPartForm",value:function(e,t){return r.a.createElement("div",{className:"blog-add__part-form",key:t},e.type===w.PARAGRAPH?this.renderParagraph(e.value,t):this.renderSelectImage(e.value,t),this.renderToolAction(t))}},{key:"renderToolAction",value:function(e){var t=this,a=r.a.createElement("div",null);return 0===e&&this.state.elements.length>0||(a=r.a.createElement(T,{onClick:function(a){return t.removeElement(a,e)},text:"Remove"})),r.a.createElement("div",{className:"blog-add__tool-action"},r.a.createElement(T,{onClick:function(a){return t.addNewParagraph(a,e)},text:"Add here paragrapgh"}),r.a.createElement(T,{onClick:function(a){return t.addNewImage(a,e)},text:"Add here image"}),a)}},{key:"renderSettings",value:function(){var e=this;return r.a.createElement("div",{className:"blog-add__settings"},r.a.createElement("input",{placeholder:"Title",onChange:function(t){return e.setState({title:t.target.value})},value:this.state.title}),r.a.createElement(V,{placeholder:"Region",onChange:function(t){return e.setState({countries:t})},endpoint:E.endpoints.countries.base}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"blog-add"},r.a.createElement("form",{className:"blog-add__form",onSubmit:function(t){return e.onSubmit(t)}},this.renderSettings(),this.state.elements.map((function(t,a){return e.renderPartForm(t,a)})),r.a.createElement(T,{type:"submit",text:"Submit"})))}}]),a}(r.a.Component),W=Object(f.g)(Object(s.b)(null,(function(e){return{notifySuccess:function(t){return e(O(t))}}}))(K)),Y=(a(132),a(171)),J=a(168),$=a(170),Q=a(169),X=a(37),Z=a.n(X),ee=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._httpService=new G,e._service=new H,e.state={subjects:[],selectedEntity:[],loading:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0});var t=this.props.initData;t&&this.mapSubjects(t,this.props.selector).forEach((function(t){return e.getBlogs(t)}));this.getSubjects()}},{key:"getSubjects",value:function(){var e=this,t=this.props.endpoint,a=this.props.selector;this._httpService.get(t).then((function(t){var n=e.mapSubjects(t,a);e.setState({subjects:n,loading:!1})})).catch((function(e){}))}},{key:"mapSubjects",value:function(e,t){return e.map((function(e,a){return{id:e.id||a,name:t?e[t]:e}}))}},{key:"getBlogs",value:function(e){var t=this;if(!this.state.selectedEntity.map((function(e){return e.subject.id})).includes(e.id)){var a={};for(var n in this.props.filters)a[n]="id"===this.props.filters[n]?e.id:e.name;this._service.getActivatedBlogs(a).then((function(a){var n={subject:e,blogs:a},r=[].concat(Object(P.a)(t.state.selectedEntity),[n]);t.setState({selectedEntity:r})})).catch((function(e){}))}this.setState({loading:!1})}},{key:"handleSubjectSelectChange",value:function(e){this.setState({loading:!0});var t=this.state.subjects.find((function(t){return e===t.id}))||{id:e};this.getBlogs(t)}},{key:"handleRemoveSubjectBlogs",value:function(e){var t=Object(P.a)(this.state.selectedEntity);t.splice(e,1),this.setState({selectedEntity:t})}},{key:"renderBlogsCard",value:function(e,t,a){var n=this;return r.a.createElement(J.a,{className:"blog-cards__card",key:e},r.a.createElement(Q.a,null,r.a.createElement("header",{className:"blog-cards__blogs-header"},t.name||t.id),a.map((function(e){return r.a.createElement(h.b,{to:E.routes.blog.detail(e.id),className:"blog-cards__blogs-list-element",key:e.id},r.a.createElement(Z.a,{fontSize:"inherit"}),r.a.createElement("div",{className:"blog-cards__blogs-list-element-text"},e.title))}))),r.a.createElement($.a,null,r.a.createElement(T,{onClick:function(){return n.handleRemoveSubjectBlogs(e)},text:"Unpin"})))}},{key:"renderMainCard",value:function(){var e=this;return r.a.createElement(J.a,{className:"blog-cards__card--header"},r.a.createElement(Q.a,null,this.state.loading&&r.a.createElement(Y.a,null),r.a.createElement(z,{data:this.state.subjects,onChange:function(t){return e.handleSubjectSelectChange(t)}})))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"blog-cards"},r.a.createElement("div",{className:"blog-cards__header"},this.renderMainCard()),r.a.createElement("div",{className:"blog-cards__list"},this.state.selectedEntity.map((function(t,a){return e.renderBlogsCard(a,t.subject,t.blogs)}))))}}]),a}(r.a.Component),te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;return Object(l.a)(this,a),(r=t.call(this,e)).endpoint=E.endpoints.blog.countries,r.filters={country:null},r.state={sites:[]},r.state={sites:(null===(n=r.props.location.state)||void 0===n?void 0:n.countries)||null},r}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(ee,{endpoint:this.endpoint,filters:this.filters,initData:this.state.sites})}}]),a}(r.a.Component),ae=Object(s.b)()(te),ne=(a(133),function(){function e(){Object(l.a)(this,e),this._httpService=new G}return Object(u.a)(e,[{key:"getUsers",value:function(e){var t="".concat(E.endpoints.auth.users);return this._httpService.get(t,{ids:e}).then((function(e){return e}))}},{key:"putUser",value:function(e){var t="".concat(E.endpoints.auth.users);return this._httpService.put(t,e).then((function(e){return e}))}}]),e}()),re=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._service=new H,e._userService=new ne,e.state={blog:{id:0,content:"",user_id:0,title:"",cooperators:null,photo_names:null,views:0,country:"Poland",add_date:"",update_date:""},elements:[],authors:{main:{username:""},support:[]}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getBlog(e)}},{key:"getBlog",value:function(e){var t=this;this._service.getBlog(e).then((function(e){e&&(t.setState({blog:e,elements:t._service.unformatContent(e.content,e.photo_names)}),console.log(t.state),t.getAuthorsNames())}))}},{key:"getAuthorsNames",value:function(){var e=this;this._userService.getUsers(this.state.blog.user_id).then((function(t){e.setState({authors:Object(M.a)(Object(M.a)({},e.state.authors),{},{main:t[0]})})}));var t=this.state.blog.cooperators;t&&this._userService.getUsers(t).then((function(t){e.setState({authors:Object(M.a)(Object(M.a)({},e.state.authors),{},{support:t})})}))}},{key:"removeBlog",value:function(e){var t=this;this._service.removeBlog(e).then((function(e){t.props.notifySuccess("Blog successfully removed..."),t.props.history.push("/blog")})).catch((function(e){return e}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"blog-detail"},r.a.createElement("div",{className:"blog-detail__description"},r.a.createElement("div",{className:"blog-detail__left"},r.a.createElement("div",{className:"blog-detail__title"},this.state.blog.title),r.a.createElement("div",{className:"blog-detail__region"},"Region: ","\xa0",this.state.blog.country.split(";").map((function(e){return r.a.createElement("span",{className:"blog-detail__region-element"},r.a.createElement(h.b,{to:{pathname:E.routes.blog.sites,state:{countries:[e]}}},e))}))),r.a.createElement("div",{className:"blog-detail__author"},"Author: ","\xa0",r.a.createElement(h.b,{to:{pathname:E.routes.blog.authors,state:{authors:[this.state.authors.main]}}},this.state.authors.main?this.state.authors.main.username:"Anonym")),r.a.createElement("div",{className:"blog-detail__support"},this.state.authors.support.length?"Support:":"",r.a.createElement(h.b,{to:{pathname:E.routes.blog.authors,state:{authors:this.state.authors.support}}},this.state.authors.support.map((function(e,t){return r.a.createElement("span",{className:"blog-detail__support-author",key:t},e.username)}))))),r.a.createElement("div",{className:"blog-detail__right"},r.a.createElement("div",{className:"blog-detail__add-date"},"Created: ",this.state.blog.add_date),r.a.createElement("div",{className:"blog-detail__update-date"},"Last modified: ",this.state.blog.update_date),r.a.createElement("div",{className:"blog-detail__seen"},"Views: ",this.state.blog.views),r.a.createElement("div",{className:"blog-detail__actions"},r.a.createElement(T,{text:"Remove",onClick:function(t){return e.removeBlog(e.state.blog.id)}})))),r.a.createElement("div",{className:"blog-detail__content"},this.state.elements.map((function(e,t){return e.type===w.PARAGRAPH?r.a.createElement("div",{className:"blog-detail__p",key:t},e.value):r.a.createElement("img",{key:t,src:e.value,alt:e.value,className:"blog-detail__image"})}))))}}]),a}(r.a.Component),oe=Object(f.g)(Object(s.b)(null,(function(e){return{notifySuccess:function(t){return e(O(t))}}}))(re)),ie=(a(134),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;return Object(l.a)(this,a),(r=t.call(this,e)).endpoint=E.endpoints.blog.authors,r.filters={user_id:"id"},r.selector="username",r.state={authors:[]},r.state={authors:(null===(n=r.props.location.state)||void 0===n?void 0:n.authors)||null},r}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(ee,{endpoint:this.endpoint,selector:this.selector,filters:this.filters,initData:this.state.authors})}}]),a}(r.a.Component)),se=(a(135),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._httpService=new G,e._service=new H,e.state={latestBlogs:[],mostSeenBlogs:[],topSeenAuthors:[],mostSeenCountries:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getMostSeenBlogs(),this.getLatestBlogs(),this.getTopSeenAuthors(),this.getMostSeenCountries()}},{key:"getMostSeenBlogs",value:function(){var e=this;this._service.getActivatedBlogs({limit:5,ordering:"-views"}).then((function(t){e.setState({mostSeenBlogs:t})})).catch((function(e){}))}},{key:"getLatestBlogs",value:function(){var e=this;this._service.getActivatedBlogs({limit:5}).then((function(t){e.setState({latestBlogs:t})})).catch((function(e){}))}},{key:"getTopSeenAuthors",value:function(){var e=this,t=E.endpoints.blog.authors;this._httpService.get(t,{limit:5,ordering:"-views"}).then((function(t){e.setState({topSeenAuthors:t})})).catch((function(e){}))}},{key:"getMostSeenCountries",value:function(){var e=this,t=E.endpoints.blog.countries;this._httpService.get(t,{limit:5,ordering:"-views"}).then((function(t){e.setState({mostSeenCountries:t})})).catch((function(e){}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"blog-dashboard"},"111",r.a.createElement(J.a,{className:"blog-dashboard__card"},r.a.createElement(Q.a,null,r.a.createElement("header",{className:"blog-dashboard__header"},"Most seen blogs"),this.state.mostSeenBlogs.map((function(e){return r.a.createElement(h.b,{to:E.routes.blog.detail(e.id),className:"blog-dashboard__list-elem-link",key:e.id},r.a.createElement(Z.a,{fontSize:"inherit"}),r.a.createElement("div",{className:"blog-dashboard__list-element-text"},e.title))})))),r.a.createElement(J.a,{className:"blog-dashboard__card"},r.a.createElement(Q.a,null,r.a.createElement("header",{className:"blog-dashboard__header"},"Latest blogs"),this.state.latestBlogs.map((function(e){return r.a.createElement(h.b,{to:E.routes.blog.detail(e.id),className:"blog-dashboard__list-elem-link",key:e.id},r.a.createElement(Z.a,{fontSize:"inherit"}),r.a.createElement("div",{className:"blog-dashboard__list-element-text"},e.title))})))),r.a.createElement(J.a,{className:"blog-dashboard__card"},r.a.createElement(Q.a,null,r.a.createElement("header",{className:"blog-dashboard__header"},"Top 5 seen authors"),this.state.topSeenAuthors.map((function(e,t){return r.a.createElement("div",{key:t},e.username)}))),r.a.createElement($.a,null,r.a.createElement(h.b,{to:{pathname:E.routes.blog.authors,state:{authors:this.state.topSeenAuthors}}},r.a.createElement(T,{text:"Visit"})))),r.a.createElement(J.a,{className:"blog-dashboard__card"},r.a.createElement(Q.a,null,r.a.createElement("header",{className:"blog-dashboard__header"},"Most seen countries"),this.state.mostSeenCountries.map((function(e,t){return r.a.createElement("div",{key:t},e)}))),r.a.createElement($.a,null,r.a.createElement(h.b,{to:{pathname:E.routes.blog.sites,state:{countries:this.state.mostSeenCountries}}},r.a.createElement(T,{text:"Visit"})))))}}]),a}(r.a.Component)),ce=(a(136),a(76)),le=a.n(ce),ue=a(174),me=a(173),de=a(172),he=a(31),fe=(a(138),function(e){return r.a.createElement("input",{className:"widget-input",type:e.type,placeholder:e.placeholder,name:e.name,ref:e.refe,onChange:function(t){return a=t,void(e.onChange&&e.onChange(a.target.value));var a}})}),pe=Object(s.b)(null,(function(e){return{notifySuccess:function(t){return e(O(t))}}}))((function(e){new ne;var t=Object(he.a)(),a=t.register,n=(t.setValue,t.handleSubmit),o=(t.errors,n((function(e){})));return r.a.createElement("form",{className:"blog-change-password",onSubmit:o},r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"Old password",name:"oldPassword",refe:a({required:!1})})),r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"New password",name:"newPassword",refe:a({required:!1})})),r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"Confirm new password",name:"newConfirmationPassword",refe:a({required:!1})})),r.a.createElement(T,{type:"submit",text:"Update"}))})),ge=Object(s.b)(null,(function(e){return{notifySuccess:function(t){return e(O(t))},setUserData:function(t){return e(j(t))}}}))((function(e){new ne;var t=Object(he.a)(),a=t.register,n=(t.setValue,t.handleSubmit),o=(t.errors,n((function(e){})));return r.a.createElement("form",{className:"blog-edit-profile",onSubmit:o},r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"Username",name:"username",refe:a({required:!1})})),r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"Email",name:"email",refe:a({required:!1})})),r.a.createElement(T,{type:"submit",text:"Update"}))})),ve=new H,be=function(e){var t=Object(n.useState)([]),a=Object(x.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){ve.getBlogs().then((function(e){i(e)})).catch((function(e){}))};return r.a.createElement("div",{className:"blog-admin"},o.map((function(e,t){return r.a.createElement("div",{key:t},e.title,r.a.createElement("span",{onClick:function(){return t=e.id,void ve.activateBlog(t).then((function(e){s()})).catch((function(e){}));var t}},"Activate"))})))};!function(e){e[e.isSuperuser=1]="isSuperuser"}(U||(U={}));var Ee,_e={"Edit profile":{component:r.a.createElement(ge,null)},"Change password":{component:r.a.createElement(pe,null)},Admin:{component:r.a.createElement(be,null),condition:U.isSuperuser}},ye=Object(s.b)((function(e){return{user:e.user}}))((function(e){return r.a.createElement("div",{className:"blog-account"},Object.keys(_e).map((function(t,a){return function(t){switch(t){case U.isSuperuser:return e.user.is_superuser;default:return!0}}(_e[t].condition)?r.a.createElement(ue.a,null,r.a.createElement(me.a,{key:a,expandIcon:r.a.createElement(le.a,null),"aria-controls":"panel-content"},t),r.a.createElement(de.a,null,_e[t].component)):r.a.createElement(r.a.Fragment,null)})))})),Se=Object(s.b)(null)((function(e){return r.a.createElement(A,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:E.routes.blog.dashboard,exact:!0,component:se}),r.a.createElement(f.b,{path:E.routes.blog.authors,component:ie}),r.a.createElement(B,{path:E.routes.blog.addNew,component:W,app:"blog"}),r.a.createElement(f.b,{path:E.routes.blog.sites,component:ae}),r.a.createElement(f.b,{path:E.routes.blog.profile,component:ye}),r.a.createElement(f.b,{path:E.routes.blog.detail(),component:oe})))})),Ne=(a(139),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"forum"})}}]),a}(r.a.Component)),Oe=(a(140),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"part part--1"},r.a.createElement(h.b,{to:"/blog",className:"part__link link"},r.a.createElement("div",{className:"part__quarter part__quarter--1"},r.a.createElement("div",{className:"part__name part__name--1"},"blog")))),r.a.createElement("div",{className:"part part--2"},r.a.createElement(h.b,{to:"/photos",className:"part__link link"},r.a.createElement("div",{className:"part__quarter part__quarter--2"},r.a.createElement("div",{className:"part__name part__name--2"},"photos")))),r.a.createElement("div",{className:"part part--3"},r.a.createElement(h.b,{to:"/forum",className:"part__link link"},r.a.createElement("div",{className:"part__quarter part__quarter--3"},r.a.createElement("div",{className:"part__name part__name--3"},"forum")))),r.a.createElement("div",{className:"part part--4"},r.a.createElement("div",{className:"part__bg-video"},r.a.createElement("video",{className:"part__bg-video--content",autoPlay:!0,muted:!0,loop:!0},r.a.createElement("source",{src:"movie-dashboard.mp4",type:"video/mp4"}),r.a.createElement("source",{src:"movie-dashboard-2.webm",type:"video/webm"}),"Sorry, your browser doesn't support embedded videos."),r.a.createElement("div",{className:"part__bg-video--gradient"})),r.a.createElement(h.b,{to:"/movies",className:"part__link link"},r.a.createElement("div",{className:"part__quarter part__quarter--4"},r.a.createElement("div",{className:"part__name part__name--4"},"movies")))))}}]),a}(r.a.Component)),ke=(a(141),function(e){return r.a.createElement("div",{className:"photos"})}),je=(a(142),function(e){return r.a.createElement("div",{className:"movies"})}),we=function(e){return r.a.createElement("div",null,"404")},Ce=(a(143),a(77)),Ae=a.n(Ce);!function(e){e[e.NONE=0]="NONE",e[e.FRAGMENTARY=1]="FRAGMENTARY",e[e.FULL=2]="FULL"}(Ee||(Ee={}));var Re=Object(s.b)(null,(function(e){return{setToken:function(t){return e(N(t))},notifySuccess:function(t){return e(O(t))}}}))((function(e){var t=new G,a=r.a.createElement(Ae.a,{cssClass:e.fbCssClass,appId:"3136029376407498",autoLoad:!1,fields:"name,picture,email",onClick:function(){},callback:function(a){var n=E.endpoints.auth.exists_fb;t.get("".concat(n,"?fb_id=").concat(a.userID)).then((function(t){t.exists?(e.setToken(a.accessToken),e.notifySuccess("Now you are logged in!"),e.handleClose(!0)):e.setRegistration(Ee.FRAGMENTARY)})).catch((function(e){}))}});return r.a.createElement("div",null,a)})),Be=(a(144),a(145),function(e){return r.a.createElement("div",{className:"widget-error",style:Object(M.a)({},e.customStyle)},e.text)}),Pe=Object(s.b)(null,(function(e){return{setToken:function(t){return e(N(t))},notifySuccess:function(t){return e(O(t))}}}))((function(e){var t=new G,a=Object(n.useState)({username:"",password:""}),o=Object(x.a)(a,2),i=o[0],s=o[1],c=Object(n.useState)({valid:!0,msg:"Username and password must be filled"}),l=Object(x.a)(c,2),u=l[0],m=l[1],d=function(){m(Object(M.a)(Object(M.a)({},u),{},{valid:!1})),setTimeout((function(){return m(Object(M.a)(Object(M.a)({},u),{},{valid:!0}))}),4e3)};return r.a.createElement("div",{className:"login"},r.a.createElement(Re,{fbCssClass:"login__fb-btn",handleClose:e.handleClose,setRegistration:e.setRegistration}),r.a.createElement("form",{className:"login__form",onSubmit:function(a){return function(a){if(a.preventDefault(),i.username&&i.password){var n=E.endpoints.auth.login;t.post(n,i).then((function(t){e.setToken(t.token),e.handleClose(!0),e.notifySuccess("Now you are logged in!")})).catch((function(e){}))}else d()}(a)}},r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"Username",onChange:function(e){return function(e){s(Object(M.a)(Object(M.a)({},i),{},{username:e}))}(e)}})),r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{type:"password",placeholder:"Password",onChange:function(e){return function(e){s(Object(M.a)(Object(M.a)({},i),{},{password:e}))}(e)}})),r.a.createElement(Be,{text:u.valid?"":u.msg}),r.a.createElement("div",{className:"login__actions"},r.a.createElement(T,{type:"button",onClick:function(t){return e.setRegistration(Ee.FULL)},text:"Sign up"}),r.a.createElement(T,{type:"submit",text:"Login"}))))})),Te=(a(146),Object(s.b)((function(e){return{user:e.user}}),(function(e){return{notifySuccess:function(t){return e(O(t))}}}))((function(e){var t=new G,a=Object(n.useState)({valid:!0,msg:"Passwords must be the same"}),o=Object(x.a)(a,2),i=o[0],s=o[1],c=Object(he.a)(),l=c.register,u=(c.setValue,c.handleSubmit),m=c.errors,d=u((function(a){if(a.password!==a.passwordConfirmation)s(Object(M.a)(Object(M.a)({},i),{},{valid:!1})),setTimeout((function(){return s(Object(M.a)(Object(M.a)({},i),{},{valid:!0}))}),4e3);else{var n;delete a.passwordConfirmation,a=Object(M.a)(Object(M.a)({},a),{},{profile:{facebook_id:null===(n=e.user.profile)||void 0===n?void 0:n.facebook_id}});var r=E.endpoints.auth.register;t.post(r,a).then((function(t){e.setRegistration(Ee.NONE),e.notifySuccess("Register successfully! Login again to authenticate yourself")})).catch((function(e){}))}}));return r.a.createElement("form",{className:"register-form",onSubmit:d},r.a.createElement("div",{className:"register-form__basic-fields"},r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{placeholder:"Username",name:"username",refe:l({required:!0})})),r.a.createElement(Be,{text:m.username?"Username is required!":""})),e.registerType===Ee.FULL?r.a.createElement("div",{className:"register-form__additional-fields"},r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{type:"password",placeholder:"Password",name:"password",refe:l({required:!0})})),r.a.createElement(Be,{text:m.password?"Password is required!":""}),r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{type:"password",placeholder:"Password Confirmation",name:"passwordConfirmation",refe:l({required:!0})})),r.a.createElement(Be,{text:m.passwordConfirmation?"Password confirmation is required!":""}),r.a.createElement(Be,{text:i.valid?"":i.msg}),r.a.createElement("div",{className:"form-field"},r.a.createElement(fe,{type:"email",placeholder:"Email",name:"email",refe:l({required:!0})})),r.a.createElement(Be,{text:m.email?"Email is required!":""})):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"register-form__actions"},r.a.createElement(T,{type:"button",onClick:function(t){return e.setRegistration(Ee.NONE)},text:"Back"}),r.a.createElement(T,{type:"submit",text:"Register"})))}))),xe=a(175),De=(a(147),function(e){return r.a.createElement("div",{className:"dialog ".concat(e.open?"dialog--show":""),onClick:function(t){var a;(a=t).target===a.currentTarget&&e.onClose()}},r.a.createElement("div",{className:"dialog__box"},r.a.createElement(xe.a,{className:"dialog__exit-icon",fontSize:"large",onClick:e.onClose}),r.a.createElement("h3",{className:"dialog__title"},e.title),e.children))}),Ie=Object(s.b)((function(e){return{isOpenLoginDialog:e.isOpenLoginDialog,user:e.user,token:e.token}}),(function(e){return{setOpenLoginDialog:function(t){return e(S(t))},setUserData:function(t){return e(j(t))}}}))((function(e){var t=new G,a=Object(n.useState)(Ee.NONE),o=Object(x.a)(a,2),i=o[0],s=o[1],c=function(){t.get(E.endpoints.auth.me).then((function(t){e.setUserData(t)}))},l=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s(Ee.NONE),e.setOpenLoginDialog(!1),t&&c()};return r.a.createElement(De,{onClose:function(){return l()},open:e.isOpenLoginDialog,title:i?"Sign up":"Login"},i?r.a.createElement(Te,{setRegistration:s,registerType:i}):r.a.createElement(Pe,{handleClose:l,setRegistration:s}))})),Le=function(){function e(){Object(l.a)(this,e),this.staticMessages={504:"Problem with server connection",0:"Unrecognized error"}}return Object(u.a)(e,[{key:"initInterceptor",value:function(e){var t=this;F.interceptors.response.use((function(e){return e}),(function(a){var n,r,o=(null===(n=a.response)||void 0===n?void 0:n.status)||0,i=t.staticMessages[o],s=null===(r=a.response)||void 0===r?void 0:r.data;if(i=i||s.message||s.non_field_errors&&s.non_field_errors[0]||t.staticMessages[0],console.log("[ERROR]",i),i.length)throw e(i),new Error(i)}))}}]),e}(),Ue=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"initInterceptor",value:function(){F.interceptors.request.use((function(e){var t=localStorage.getItem(E.tokenKey),a=Object(M.a)({},e.headers);return t&&(a=Object(M.a)(Object(M.a)({},a),{},{Authorization:"Token ".concat(t)}),e=Object(M.a)(Object(M.a)({},e),{},{headers:a})),e}))}}]),e}(),Me=function(){function e(){Object(l.a)(this,e),this._errInterceptor=new Le,this._tokenInterceptor=new Ue}return Object(u.a)(e,[{key:"initInterceptors",value:function(e){this._errInterceptor.initInterceptor(e),this._tokenInterceptor.initInterceptor()}}]),e}(),qe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e))._httpService=new G,n._interceptor=new Me,n._notificationSystem=r.a.createRef(),n._notificationStyle={NotificationItem:{DefaultStyle:{fontSize:"2rem"}}},n.addNotification=function(e,t){n._notificationSystem.current.addNotification({message:e,level:t})},n._interceptor.initInterceptors(e.notifyError);var o=localStorage.getItem(E.tokenKey);return e.setToken(o||""),o&&n.getUserData(),n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.notify;e.notify!==n&&this.addNotification(n.msg,n.type)}},{key:"getUserData",value:function(){var e=this;this._httpService.get(E.endpoints.auth.me).then((function(t){e.props.setUserData(t)})).catch((function(e){}))}},{key:"renderRouter",value:function(){return r.a.createElement(h.a,{basename:"/portfolio"},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0,component:Oe}),r.a.createElement(f.b,{path:"/blog",component:Se}),r.a.createElement(f.b,{path:"/photos",component:ke}),r.a.createElement(f.b,{path:"/forum",component:Ne}),r.a.createElement(f.b,{path:"/movies",component:je}),r.a.createElement(f.b,{path:"*",component:we})))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderRouter(),r.a.createElement(g.a,{ref:this._notificationSystem,style:this._notificationStyle}),r.a.createElement(Ie,null))}}]),a}(r.a.Component),Fe=Object(s.b)((function(e){return{notify:e.notify}}),(function(e){return{notifyError:function(t){return e(k(t))},setToken:function(t){return e(N(t))},setUserData:function(t){return e(j(t))}}}))(qe),Ge=a(32),He=a(78),ze={type:"INFO",msg:"INFO"},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;return["info","success","warning","error"].includes(t.type)&&(e=Object(M.a)(Object(M.a)({},e),{},{type:t.type,msg:t.msg})),e},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":localStorage.setItem(E.tokenKey,t.value?t.value:""),e=t.value}return e},We={username:"",profile:{location:"",facebook_id:"",facebook_name:""}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":e=Object(M.a)({},t.data)}return e},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_LOGIN":e=t.value}return e},$e=Object(Ge.d)(Object(Ge.c)({notify:Ve,isOpenLoginDialog:Je,user:Ye,token:Ke}),{},Object(Ge.a)(Object(He.createLogger)()));i.a.render(r.a.createElement(s.a,{store:$e},r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,a){e.exports=a(148)},95:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.8f148285.chunk.js.map